# Игровой движок

## Базовые классы

### Board

Класс, в котором реализована вся логика отрисовки карт на доске.

|        Имя        | Описание                                                                                             |
| :---------------: |:-----------------------------------------------------------------------------------------------------|
|      **ctx**      | 2D контекст, на котором будет рисоваться игра                                                        |
| **areaCards** | 4 точки расположения карты, которые используются для обработчика клика                               |
|  **choiceCards**   | Массив булевых элементов, который определяет, какая карта была выбрана (true - выбрана, false - нет) |
|  **coordinates**   | Координаты карт                                                                                      |
|  **getCoordinatesForOneCard**   | Получения координат карты, когда ход соперника                                                       |
|  **getCoordinatesForTwoCard**   | Получение координат карты, когда очередь самого игрока                                               |
|  **drawDiscardedCard**   | Отрисовка сброшенных карт в верхней части доски                                                      |
|  **renderCards**   | Сброс всех состояний и определение количества отрисовываемых карт                                    |
|  **handleClickOnCard**   | Обработчик клика по карте                                                                            |
|  **swapActiveCard**   | Смена активной и сброшенной карты и вызов перерисовки сцены                                          |
|  **createCardImage**   | Отрисовка карты                                                                                      |


Пример инициализации доски:

```javascript
const canvasRef = useRef<HTMLCanvasElement | null>(null)
board.current = new Board(canvasRef.current)
```

## Классы игровых объектов

### СardDeck

Класс, который отвечает за инициализацию карточной колоды, ее перемешивание, а также реализует вытягивание игроком карты из колоды, возвращая выбранную карту и новую колоду.
Так как колода карт может быть только одна, класс реализован с помощью паттерна Singleton.


### Player

Класс, который содержит в себе основную информацию об игроке, его карте, находится ли игрок под защитой, а также количество жетонов симпатии.

Пример инициализации игрока:

```javascript
const player = new Player({
  /* User */
});
```

### Players

Класс, отвечающий за инициализацию игроков комнаты и получению информации о них.


## Вспомогательные классы

### Queue

Очередь игроков формируется классом Queue.

|        Имя        | Описание                       |
| :---------------: |:-------------------------------|
|    **_storage**     | Список элементов очереди       |
| **size** | Размер очереди                 |
|  **enqueue**   | Добавление элементов в очередь |
|  **dequeue**   | Извлечение элементов очереди   |

Пример инициализации очереди:

```javascript
const queue = new Queue()

players.forEach((player: Player) => queue.enqueue(player))
```
